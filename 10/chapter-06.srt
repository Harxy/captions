1
00:00:00,000 --> 00:00:02,880
Chapter 6: Playing part 2 sequence.

2
00:00:03,030 --> 00:00:09,000
So we've got this thing which
is, (sorry control-M)  looping.

3
00:00:09,020 --> 00:00:12,760
But, we might want to have the second player playing.

4
00:00:12,760 --> 00:00:15,560
Because right now it's incomplete!

5
00:00:15,560 --> 00:00:17,640
So I'm going to mute this thing again.

6
00:00:17,680 --> 00:00:25,300
And so looking at the challenge, it says
that it starts playing both at the same time.

7
00:00:25,310 --> 00:00:32,050
After 4 times of repeating the stanza,
the second player shifts one note?

8
00:00:32,050 --> 00:00:33,270
DN: Yes.

9
00:00:33,290 --> 00:00:37,900
And then after four times of doing that
thing, the second player shifts another beat.

10
00:00:37,930 --> 00:00:48,590
So I want to increase the stanza
number after every 4th repeat.

11
00:00:48,610 --> 00:00:53,580
And I'm going to use the stanza
number every time I want to shift.

12
00:00:55,160 --> 00:01:00,160
So I'm going to algorithmically
generate the score for the second player.

13
00:01:00,160 --> 00:01:08,750
Instead of giving this player a different
score I will look at the score and shift that.

14
00:01:08,780 --> 00:01:15,550
It's the second score but it's
determined based on the existing score.

15
00:01:15,550 --> 00:01:20,070
Because maybe later, if we have time we
might want to change the score. inaud

16
00:01:20,090 --> 00:01:27,880
That's why I'm not generating that from the
beginning, but basing it on the existing score.

17
00:01:27,940 --> 00:01:36,650
I guess I can have something like stanzaLoopTime...

18
00:01:36,670 --> 00:01:40,040
No, I don't like this variable here.

19
00:01:40,520 --> 00:01:43,755
DN: I suppose it's almost like,
how many repetitions in a stanza.

20
00:01:43,760 --> 00:01:48,435
SP: Yeah, stanzaReps. Like power lifters! [Laughter]

21
00:01:48,445 --> 00:01:57,965
OK, so we also want to loop
4 times to hard code everything.

22
00:01:58,300 --> 00:02:07,590
I don't know if I want to call it stanza loop.
numStanzaloops maybe, that sounds better.

23
00:02:07,610 --> 00:02:08,395
DN: OK.

24
00:02:08,410 --> 00:02:11,675
SP: I will say I want to loop this
thing 4 times, and every time it's 4,

25
00:02:11,690 --> 00:02:15,920
I will just increase the reps and
then decide what way to play it.

26
00:02:21,390 --> 00:02:25,380
Also, we can get rid of this play
sequence because we are reducing the thing.

27
00:02:26,020 --> 00:02:29,735
Go away.  It's good to leave it clear inaud.

28
00:02:29,730 --> 00:02:31,660
DN: Yes sure.

29
00:02:34,470 --> 00:02:39,355
SP: So this is when we should repeat
the thing, so this is we need to increase.

30
00:02:39,370 --> 00:02:42,380
We also could get rid of these console thingies.

31
00:02:43,095 --> 00:02:47,280
What else... For example here,
but we will keep it for now.

32
00:02:47,300 --> 00:02:51,235
We could use it to print the
number of reps that we've done.

33
00:02:51,230 --> 00:02:58,270
I'll go to the top so I can see.

34
00:02:58,280 --> 00:03:00,100
So stanzaReps.

35
00:03:00,540 --> 00:03:04,580
We also want to know which
is the current stanza number.

36
00:03:07,145 --> 00:03:12,295
We want to keep the number
of reps of the current one; maximum of 4.

37
00:03:12,290 --> 00:03:18,000
But we also need to know which is the
current one so we can increase that after 4 beats.

38
00:03:18,015 --> 00:03:18,690
DN: Sure.

39
00:03:18,700 --> 00:03:21,480
SP: And also make sense inaud this,

40
00:03:21,490 --> 00:03:22,850
So this is the current one.

41
00:03:22,850 --> 00:03:25,010
This is the amount of time we repeat with the stanza.

42
00:03:25,020 --> 00:03:28,185
And this is the maximum we repeat the stanza.

43
00:03:28,200 --> 00:03:31,585
I think it's a good idea to have
variables ordered in a logical way.

44
00:03:34,010 --> 00:03:39,350
So when we finish the sequence, we look but we also...

45
00:03:39,360 --> 00:03:46,755
We increment the number
of repetitions of this stanza.

46
00:03:46,760 --> 00:03:57,690
But if the stanza reps is the number
of loops, we should increase the current stanza...

47
00:04:00,750 --> 00:04:02,970
Hopefully. [laughter]

48
00:04:08,430 --> 00:04:14,580
So I will print current stanza here.

49
00:04:14,670 --> 00:04:17,730
[Silence]

50
00:04:19,330 --> 00:04:25,290
And maybe the reps as well so we can check it.

51
00:04:25,310 --> 00:04:34,700
SP: So this is the current stanza and reps.

52
00:04:34,800 --> 00:04:38,630
I don't usually use the word stanza.

53
00:04:38,640 --> 00:04:40,130
DN: It's not flowing off your fingers. [Laughter]

54
00:04:40,180 --> 00:04:41,980
SP: No, it's not.

55
00:04:41,980 --> 00:04:47,200
In theory it should stop.

56
00:04:49,020 --> 00:04:51,870
Something broke. I don't know.

57
00:04:51,870 --> 00:04:54,200
inaud

58
00:04:54,280 --> 00:05:03,250
[They listen to the clapping]

59
00:05:04,580 --> 00:05:09,880
I'm not sending anything to
zero. So that's why it's going forever.

60
00:05:09,880 --> 00:05:15,170
So it should increase that but it also should...

61
00:05:15,210 --> 00:05:19,040
It's hard to think when this
thing is clapping in your face.

62
00:05:19,070 --> 00:05:26,100
It should increase that but also go back to zero.

63
00:05:26,140 --> 00:05:30,680
We need to inaud that because we're doing a new one.

64
00:05:30,800 --> 00:05:33,290
OK let's try again.

65
00:05:33,320 --> 00:05:44,710
[They listen again]

66
00:05:44,960 --> 00:05:48,680
I think that makes more sense.

67
00:05:50,830 --> 00:05:55,940
The first one doesn't load because
we are not inaud yet, but I think it's correct.

68
00:05:55,970 --> 00:05:58,260
DN: It looked wrong at first there because... inaud

69
00:05:58,280 --> 00:06:01,760
SP: Yes, we should show the thing on the
screen all the time, it would make more sense.

70
00:06:01,790 --> 00:06:05,200
So I think I will do that once
we get the player playing.

71
00:06:05,230 --> 00:06:09,870
[They listen] OK, this looks good.
Now I need the second player to play.

72
00:06:09,900 --> 00:06:14,040
I need to commit this.

73
00:06:14,090 --> 00:06:19,270
I keep checking this, I am only changing main.js.

74
00:06:21,010 --> 00:06:27,690
This should be 'keep track of stanza and reps'.

75
00:06:29,050 --> 00:06:33,530
And with that I can determine
what the second player should play.

76
00:06:33,560 --> 00:06:43,200
So the ‘should play' is for the first player.

77
00:06:43,200 --> 00:06:46,130
And we need to determine
if the second player has to play. 

78
00:06:46,150 --> 00:06:51,020
So I'm going to rename this
to shouldPlay1 and shouldPlay1,

79
00:06:51,050 --> 00:06:56,330
and then I'll find out if the second one needs to play. 

80
00:06:56,330 --> 00:07:01,790
It's not very scalable when you have lots
of things to play but for this case it should be OK. 

81
00:07:01,820 --> 00:07:08,440
So this is going to be using
the number of the current stanza, 

82
00:07:08,450 --> 00:07:13,960
because every time we play
another 4 loops we want to shift.

83
00:07:14,000 --> 00:07:20,860
And I'm going to calculate
the step separately, so it's clear.

84
00:07:20,890 --> 00:07:29,700
So the current step is the current step,
plus the current stanza because that shifts 1.

85
00:07:29,780 --> 00:07:39,780
 but we don't want to go too far because the sequence only has 12 

86
00:07:39,780 --> 00:07:41,780
so if I'm in the last step and I'm playing the second player, I'm going to be out, so I have to look back and start from zero and you can use the modulo operator.
Inaud, does that make sense.
DN: Yes that makes sense.
SP: So, for those at home that don't know.
This I'm not going to execute.

