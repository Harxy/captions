1
00:00:00,000 --> 00:00:03,856
[Chapter 2: Playing a clap sample]

2
00:00:03,850 --> 00:00:06,112
SP: So this is just an empty
directory: there's nothing here.

3
00:00:06,128 --> 00:00:13,248
I'll start by creating an HTML file,
so we can start doing things.

4
00:00:13,240 --> 00:00:16,144
And I'll just use Vim. [Laughter]

5
00:00:16,140 --> 00:00:22,912
And I can configure that the way I like.
I don't like decorum when I make things.

6
00:00:22,910 --> 00:00:31,552
So the reason I comment something like inaud is because inaud the labels. Everyone says what kind of course is that why inaud.

7
00:00:31,550 --> 00:00:36,208
<head> and [Silence as Sole types]

8
00:00:36,200 --> 00:00:40,400
So this is just inaud.

9
00:00:40,400 --> 00:00:44,688
[Silence]

10
00:00:44,680 --> 00:00:50,880
I think I learned this trick from you, how to solve inaud.

11
00:00:50,880 --> 00:00:52,880
DN: Is that utf-8?

12
00:00:52,880 --> 00:00:59,376
No, this is me typing quickly. I think you can use both.

13
00:00:59,370 --> 00:01:02,816
inaud the parser knows.

14
00:01:02,848 --> 00:01:10,448
Right now I don't need to have anything
but I suppose I should put something for it.

15
00:01:10,440 --> 00:01:16,512
Close everything. Inaud.

16
00:01:16,590 --> 00:01:28,416
So if I open this thing – there's nothing here,
just this thing, nothings happening either.

17
00:01:28,656 --> 00:01:32,784
To start with it's just the plain clap.

18
00:01:32,780 --> 00:01:39,520
You can see how I start assembling the whole inaud.

19
00:01:39,520 --> 00:01:41,744
So back to this thing.

20
00:01:41,760 --> 00:01:48,880
I need something that loads, or does
the thing, so I'm going to load a script which...

21
00:01:48,940 --> 00:01:55,040
This is not the best place to
put it but I will start with this.

22
00:01:55,248 --> 00:02:00,080
And obviously we need to write the file.

23
00:02:01,960 --> 00:02:09,840
I like to be at least, a little correct. inaud here

24
00:02:09,904 --> 00:02:15,488
So the code at least waits for loading.

25
00:02:17,210 --> 00:02:20,688
This should start when the whole thing has loaded.

26
00:02:20,720 --> 00:02:24,064
Which shouldn't be too
complex because there isn't much at all.

27
00:02:24,112 --> 00:02:28,240
But it's good to start with a
good habit from the beginning.

28
00:02:28,240 --> 00:02:31,184
And then have the screens afterwards

29
00:02:31,216 --> 00:02:36,528
When you want a web audio you
have to start by creating a context.

30
00:02:36,576 --> 00:02:46,112
A black box thing or mini universe,
so you can create a new AudioContext like this.

31
00:02:46,140 --> 00:02:51,248
Inaud because Safari doesn't
know how to do things without prefixes.

32
00:02:51,280 --> 00:02:57,792
If you want to do this in Safari
you have to say look at all the context.

33
00:02:57,800 --> 00:03:09,984
People start doing things like:
AudioContext || WebkitAudioContext

34
00:03:10,016 --> 00:03:11,152
This is pretty messy.

35
00:03:11,200 --> 00:03:14,720
There is a polyfill you can install
and it will bring all the variations,

36
00:03:14,760 --> 00:03:19,376
and it also patches some methods
safari has, that are the old style.

37
00:03:19,370 --> 00:03:21,200
Because they haven't updated everything.

38
00:03:21,200 --> 00:03:24,530
But, I don't like to tamper with
those things when I'm doing a new project.

39
00:03:24,550 --> 00:03:28,670
So I just try to do everything and then if
I really need to make this thing work with safari,

40
00:03:28,680 --> 00:03:33,830
then I will add the polyfill and make sure that all
the patches work with the new style of code,

41
00:03:33,840 --> 00:03:37,540
but for this example we can just leave it like this.

42
00:03:37,570 --> 00:03:40,020
So we have this and it doesn't do anything at all.

43
00:03:40,020 --> 00:03:45,870
And just to make sure that it
works, I just log simple things.

44
00:03:45,940 --> 00:03:52,310
So below that it is showing me I have another
context, and its got sample rate and inaud

45
00:03:52,420 --> 00:04:00,270
And there's nothing happening.
We have this thing but there is nothing to see.

46
00:04:00,270 --> 00:04:03,050
DN: I see, so this is a dedicated inspector for the...

47
00:04:03,060 --> 00:04:10,370
SP: Yes, and if you don't do anything, you don't
give it the context. Nothing is going to be shown. 

48
00:04:10,380 --> 00:04:12,870
We are waiting for something
to happen – it's very lazy. 

49
00:04:12,880 --> 00:04:16,500
It doesn't waste resources, trying to spec things. 

50
00:04:16,520 --> 00:04:25,570
 So, the way this works is you have nodes,
and you connect those nodes to the destination.

51
00:04:25,720 --> 00:04:37,750
It creates a graph of sounds that go in a cascade
to the context destination, which is the speakers.

52
00:04:37,780 --> 00:04:44,430
So if I want to make some clap sounds
on this computer I need to load the sound, 

53
00:04:44,430 --> 00:04:48,590
and then create a node that can
play the things.... And then trigger the thing.

54
00:04:48,590 --> 00:04:54,280
Also it has to be connected to the destination
so it can sound, so this is like inaud

55
00:04:54,280 --> 00:04:58,260
So I will try and start by loading the file.

56
00:04:58,260 --> 00:04:59,630
DN: So there will be a sample.

57
00:04:59,660 --> 00:05:01,560
SP: Yes, I'm going to load a sample.

58
00:05:01,560 --> 00:05:09,310
I grew up with trackers and things, so samples aren't
natural to me, I don't think it's natural for everyone. 

59
00:05:09,360 --> 00:05:16,600
So I'm never sure if I should
call it a sound file or sample or what.

60
00:05:17,550 --> 00:05:21,210
So yes, I'm going to try to load the sample. 

61
00:05:21,210 --> 00:05:26,340
And then we decode it because when you 
now the sample it's just like binary data.

62
00:05:26,360 --> 00:05:28,880
but web audio doesn't know what to do with that.

63
00:05:28,900 --> 00:05:33,280
There is inaud function to
call it and then we will play it. 

64
00:05:33,290 --> 00:05:38,100
So I'm going to try to do this thing first.
Then we will do the sequences things.

65
00:05:38,160 --> 00:05:47,010
So for loading this we use this
famous cross request thingy.

66
00:05:47,040 --> 00:05:56,860
There is a thing called fetch; I can't remember
the syntax of that so I'll open my cheat thingy,

67
00:05:56,860 --> 00:06:02,270
which is the load sample thing.

68
00:06:02,300 --> 00:06:12,150
This is important, you want to create a new
XMLHttpRequest with a responseType of arraybuffer. 

69
00:06:12,150 --> 00:06:18,400
And then you want to listen once the thing has
loaded, but I just want to go step by step. 

70
00:06:18,400 --> 00:06:20,400
I just need a reminder (laughter).
It's inaud because its uppercase... One upper case, it should be all uppercase.

